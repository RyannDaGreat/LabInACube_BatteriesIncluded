{"ast":null,"code":"import _objectSpread from \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/src/index.js\";\nimport MaterialButton from '@material-ui/core/Button';\nimport Input from '@material-ui/core/Input';\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport Select from 'react-select';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nwindow.allItemTypesContainingStructure = function (structure) {\n  const out = [];\n  console.assert(arguments.length === 1, 'Wrong number of arguments'); // window.assert.isPureObject(structure)\n\n  for (const _ref of Object.entries(window.getItemSchemas())) {\n    var _ref2 = _slicedToArray(_ref, 2);\n\n    const itemType = _ref2[0];\n    const itemSchema = _ref2[1];\n\n    if (window.containsStructure(itemSchema, structure)) {\n      out.push(itemType);\n    }\n  }\n\n  return out;\n};\n\nwindow.allItemIdsOfType = function (type) {\n  const out = [];\n  console.assert(arguments.length === 1, 'Wrong number of arguments'); // window.assert.isString(type)\n\n  for (const _ref3 of Object.entries(window.config.items)) {\n    var _ref4 = _slicedToArray(_ref3, 2);\n\n    const _id = _ref4[0];\n    const _type = _ref4[1];\n\n    if (type === _type) {\n      out.push(_id);\n    }\n  }\n\n  return out;\n};\n\nwindow.allItemIdsContainingStructure = function (structure) {\n  let out = [];\n  console.assert(arguments.length === 1, 'Wrong number of arguments'); // window.assert.isPureObject(structure)\n\n  const types = window.allItemTypesContainingStructure(structure);\n\n  for (const type of types) {\n    const itemIds = window.allItemIdsOfType(type);\n    out = [...out, ...itemIds];\n  }\n\n  return out;\n};\n\nwindow.allItemIdsWithTransform = function () {\n  //Return all item ids with full position, rotation, and\n  return window.allItemIdsContainingStructure({\n    transform: {}\n  });\n};\n\nfunction Multiplexer({\n  schema\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        selectedOption = _useState2[0],\n        setSelectedOption = _useState2[1];\n\n  if (!schema) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  });\n  const options = Object.keys(schema).map(key => ({\n    value: key,\n    label: key\n  }));\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Select, {\n    style: {\n      width: '100%'\n    },\n    value: {\n      label: selectedOption\n    },\n    onChange: x => setSelectedOption(x.value),\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    style: {\n      width: '10px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"td\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Schema, {\n    schema: schema[selectedOption],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })))))));\n}\n\nfunction StringInput({\n  schema\n}) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, schema);\n}\n\nfunction isLeaf(schema) {\n  if (typeof schema !== 'object') return 'type';\n\n  for (const _ref5 of Object.entries(schema)) {\n    var _ref6 = _slicedToArray(_ref5, 2);\n\n    const index = _ref6[0];\n    const value = _ref6[1];\n\n    if (typeof value === 'string') {\n      console.assert('type' in schema);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction addItemDialogs() {\n  function itemDialog() {\n    const value = prompt(\"Enter the new item name:\");\n    if (!value) return alert('Canceled adding item');else if (value in window.config.items) {\n      alert('Sorry, that names already taken! Try another one...');\n      return itemDialog();\n    }\n    return value;\n  }\n\n  function typeDialog() {\n    const value = prompt(\"Enter the new item type! Please choose from: \" + Object.keys(window.getItemSchemas()));\n    if (!value) return alert('Canceled adding item');else if (!(value in window.getItemSchemas())) {\n      alert('Sorry, thats not a module type! Please choose from: ' + Object.keys(window.getItemSchemas()));\n      return typeDialog();\n    }\n    return value;\n  }\n\n  const name = itemDialog();\n  if (!name) return;\n  const type = typeDialog();\n  if (!type) return;\n  alert(\"Success! Added item. Please refresh the page to see changes.\");\n  window.addLinesToConfigString('items\t' + name + ' ' + type);\n  window.refreshPage();\n}\n\nfunction deltaDialog(description = \"\") {\n  const value = prompt(description + '\\n' + \"Enter the new delta name:\");\n  if (!value) return alert('Canceled adding delta');else if (value in window.config.deltas) {\n    alert('Sorry, that names already taken! Try another one...');\n    return deltaDialog();\n  }\n  return value;\n}\n\nfunction addDeltaDialog() {\n  const d = deltaDialog();\n  if (!d) return;\n  alert(\"Success! Added delta. You will now see it in the top dropdown menu.\");\n  window.addLinesToConfigString('deltas\t' + d);\n  window.refreshGuiSchema();\n}\n\nfunction Schema({\n  schema\n}) {\n  if (!schema) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  });\n\n  if (isLeaf(schema)) {\n    return React.createElement(LeafModifier, {\n      schema: schema,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    });\n  } else {\n    return React.createElement(Multiplexer, {\n      schema: schema,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    });\n  }\n}\n\nfunction TextInput({\n  value,\n  setValue\n}) {\n  return React.createElement(Input, {\n    value: value,\n    onChange: event => {\n      setValue(event.target.value);\n    } // className={classes.input}\n    ,\n    inputProps: {\n      'aria-label': 'Description'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  });\n}\n\nfunction NumberInput({\n  value,\n  setValue,\n  step = .1\n}) {\n  return React.createElement(TextField, {\n    type: \"number\",\n    value: value,\n    inputProps: {\n      /*min: \"0\", max: \"10\",*/\n      step: step\n    },\n    onChange: event => {\n      setValue(event.target.value);\n    } // className={classes.input}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  });\n}\n\nfunction SelectInput({\n  value,\n  setValue,\n  values = []\n}) {\n  return React.createElement(Select, {\n    value: {\n      label: value\n    },\n    onChange: x => setValue(x.value),\n    options: values.map(key => ({\n      value: key,\n      label: key\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  });\n}\n\nfunction BooleanInput({\n  value,\n  setValue\n}) {\n  return React.createElement(Switch, {\n    checked: Boolean(value),\n    onChange: event => setValue(event.target.checked),\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  });\n}\n\nfunction LeafModifier({\n  schema\n}) {\n  let onClick = function () {\n    const value = prompt(\"Enter the new value:\");\n    if (value == null) return; //Canceled\n    else {\n        schema.set(value);\n      }\n  };\n\n  const checked = schema.config !== undefined; // alert(\"ASOIJD\")\n\n  let input = React.createElement(TextInput, {\n    value: schema.config,\n    setValue: schema.set,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  });\n\n  if (schema.type === 'string') {\n    input = input; //Default: text input\n  } else if (schema.type === 'boolean') {\n    input = React.createElement(BooleanInput, {\n      value: schema.config,\n      setValue: schema.set,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    });\n  } else if (schema.type === 'number') {\n    input = React.createElement(NumberInput, {\n      value: schema.config,\n      setValue: schema.set,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    });\n  } else if (schema.type === 'select') {\n    input = React.createElement(SelectInput, {\n      value: schema.config,\n      values: schema.values,\n      setValue: schema.set,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    });\n  }\n\n  console.assert(input !== undefined);\n  return React.createElement(\"div\", {\n    style: {\n      padding: 20,\n      paddingTop: 10,\n      backgroundColor: 'rgba(255,255,255,.5)',\n      borderRadius: 30,\n      alignContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    checked: checked,\n    disabled: schema.path[0] === 'initial',\n    onChange: event => {\n      const checked = event.target.checked;\n      if (checked)\n        /*alert(schema.state+'  '+schema.config)*/\n        schema.set(checked ? schema.state : null);\n    } //if(!checked){schema.set(undefined)}else{console.assert(checked);setUsed(checked)}}}\n    ,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }), checked ? \"(In delta)\" : \"(Not in delta)\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }), checked ? input : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  })); //\t\t   <Button\n  //\tvariant=\"contained\" onClick={onClick}\n  //\tsize=\"small\"\n  //\t\t   >{'State: '+schema.state+'\\tConfig: '+schema.config/*schema.path+''*/}</Button>\n}\n\nlet oldStuff = undefined;\nsetInterval(window.tryRefreshInstance, 100);\n\nfunction tryRefreshInstance() {\n  if (window.refreshInstance) window.refreshInstance();\n}\n\nwindow.refreshInstance = undefined;\n\nfunction GetSimpleGui() {\n  const labels = [];\n\n  let _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      instance = _useState4[0],\n      setInstance = _useState4[1];\n\n  window.refreshInstance = () => setInstance(window.getGuiArchitectureInstance());\n\n  timerEvents[0] = () => {\n    let stuff = window.gameWindow.getGuiArchitectureInstance.apply(window.gameWindow, [window.gameWindow.config]);\n\n    if (stuff !== oldStuff) {\n      setInstance(stuff);\n      oldStuff = stuff;\n    }\n  }; //This function is inefficient. It must be cleaned up asap. (it lists all possible controls...which is just STUPID (but also very easy to make))\n\n\n  for (const _ref7 of Object.entries(instance)) {\n    var _ref8 = _slicedToArray(_ref7, 2);\n\n    const index = _ref8[0];\n    const i = _ref8[1];\n\n    if (i.path.includes('color')) {\n      let onClick = function () {\n        const value = prompt(\"Enter the new value for \" + i.path.join(' ') + '\\n\\n at delta ' + i.delta + '\\n\\nCurrent Value: ' + i.valueInConfig);\n        if (value == null) return; //Canceled\n        else {\n            let configString = localStorage.getItem('config');\n            configString += '\\n' + 'deltas\t' + i.delta + '\t' + i.path.join('\t') + ' ' + value;\n            window.gameWindow.setConfigDjsonInLocalStorage(configString);\n          }\n      };\n\n      let color = i.valueInConfig === undefined ? \"primary\" : \"secondary\";\n      labels.push(React.createElement(Button, {\n        key: index,\n        variant: \"contained\",\n        onClick: onClick,\n        size: \"small\",\n        color: color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, 'deltas ' + i.delta + ' ' + i.path.join(' ')));\n    }\n  }\n\n  return React.createElement(\"table\", {\n    style: {\n      flexGrow: 4,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327\n    },\n    __self: this\n  }, labels);\n}\n\nfunction handleNewLab() {\n  if (window.confirm('Are you sure you want to create a new lab (all progress will be lost)?')) {\n    window.setConfigDjsonInLocalStorage('');\n    window.refreshPage();\n  }\n}\n\nwindow.gameWindow = undefined; //Will be set to the 'window' element of the 'game.html' iframe\n\nconst timerEvents = [() => {}]; //Calls each one of these on a timer\n\nfunction doTimerEvents() {\n  if (window.gameWindow !== undefined) //We're not ready yet: the game iframe has to finish loading first\n    {\n      console.log(\"HO\");\n      window.gameWindow.editorMode = true;\n\n      for (const event of timerEvents) event();\n    }\n}\n\nsetInterval(doTimerEvents, 100);\n\nfunction handleLoadConfig(kwargs = {}) {\n  const _kwargs$concat = kwargs.concat,\n        concat = _kwargs$concat === void 0 ? false : _kwargs$concat;\n  const code = prompt('Please enter the 4 character code (case-sensitive) that you received when pressing \"Save Config\"');\n\n  if (typeof code === 'string' && code.length === 4) {\n    window.loadConfigFromServer(code, {\n      concat\n    });\n  } else if (!code) {\n    alert('Loading config from server cancelled.');\n  } else {\n    alert('Please enter a four character code (you entered ' + JSON.stringify(code) + ', which has ' + code.length + ' characters)');\n    handleLoadConfig();\n  }\n}\n\nfunction viewMySaves() {\n  const saves = window.getMySaves();\n  if (!saves.length) window.alert('You currently have no saved labs.');else window.alert(\"All of your saved file codes (bottom is most recent):\" + '\\n' + saves.join('\\n'));\n}\n\nfunction handleEditCode() {\n  if (!__weAreInAnIframe__) //We are in an iframe\n    {\n      if (window.confirm('Are you sure you want to go to the code editor? (This option exists for mainly devs, such as Ryan Jenny and Rong)')) {\n        window.goToUrl('../Editor/index.html');\n      }\n    } else {\n    alert('You\\'re already in the code editor.');\n  }\n}\n\nfunction handleHideEditorGui() {\n  if (window.confirm('Are you sure you want to hide to the editor gui? (This will bring you to game.html)')) {\n    window.goToUrl('../game.html');\n  }\n} //PART OF TODO TO MAKE LABS LOADABLE VIA URL\n// if(window.location.pathname.length=5)//In other words, if we have some 5 letter code\n\n\nasync function selectionDialog(promptText = \"\", selection) {\n  //Will be replaced by HTML or something later\n  console.assert(selection.length);\n  console.assert(arguments.length === 2, 'Wrong number of arguments');\n  let out = await asyncPrompt(promptText + '\\nPlease choose from these options (case sensitive):\\n' + selection);\n  if (selection.includes(out)) return out;\n  if (!out) return null;\n  return selectionDialog(promptText, selection);\n}\n\nasync function asyncPrompt(...args) {\n  return window.prompt(...args);\n} // noinspection EqualityComparisonWithCoercionJS\n\n\nasync function textDialog({\n  promptText = '',\n  condition = text => text != undefined,\n  cancellable = true,\n  asyncMethod = prompt,\n  onInvalid = async text => alert(\"Sorry, the input '\".concat(text, \"' isn't allowed...please try again\"))\n} = {}) {\n  while (true) {\n    const text = await asyncMethod(promptText); // noinspection EqualityComparisonWithCoercionJS\n\n    if (cancellable && text == undefined) {\n      return undefined; //User hit cancel or something\n    }\n\n    if (condition(text)) {\n      return text;\n    } else {\n      await onInvalid(text);\n    }\n  }\n}\n\nwindow.numberDialog = async function (_ref9 = {}) {\n  let _ref9$promptText = _ref9.promptText,\n      promptText = _ref9$promptText === void 0 ? '' : _ref9$promptText,\n      _ref9$min = _ref9.min,\n      min = _ref9$min === void 0 ? -1 / 0 : _ref9$min,\n      _ref9$max = _ref9.max,\n      max = _ref9$max === void 0 ? 1 / 0 : _ref9$max,\n      kwargs = _objectWithoutProperties(_ref9, [\"promptText\", \"min\", \"max\"]);\n\n  function isNumeric(text) {\n    return !isNaN(Number(text));\n  }\n\n  function isValid(text) {\n    if (!isNumeric(text)) return false;\n    const n = Number(text);\n    return n <= max && n >= min;\n  }\n\n  return Number((await textDialog(_objectSpread({\n    condition: isValid,\n    promptText: promptText + '\\n' + 'Please choose a number between ' + min + ' and ' + max\n  }, kwargs))));\n};\n\nfunction displayHelp(help) {\n  alert(help);\n}\n\nfunction Button(props) {\n  let out = React.createElement(MaterialButton, Object.assign({\n    style: {\n      margin: 1,\n      fontWeight: 'bold'\n    },\n    variant: \"contained\",\n    size: \"small\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476\n    },\n    __self: this\n  }), props.children);\n\n  if (props.helpLabel || props.helptext) {\n    let extraProps = {};\n\n    if (props.helptext) {\n      extraProps.onClick = () => displayHelp(props.helptext);\n    }\n\n    let title = React.createElement(\"div\", Object.assign({\n      style: {\n        cursor: \"help\"\n      }\n    }, extraProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490\n      },\n      __self: this\n    }, props.helpLabel || \"Help\"));\n    out = React.createElement(Tooltip, {\n      title: title,\n      placement: \"right\",\n      interactive: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    }, out);\n  }\n\n  return out;\n}\n\nconst checkpointDeltaIdPrefix = 'checkpoint.';\n\nwindow.getAllDeltaIds = function () {\n  console.assert(arguments.length === 0, 'Wrong number of arguments');\n  return Object.keys(window.config.deltas);\n};\n\nwindow.checkpointNameToDeltaId = function (checkpointName) {\n  return checkpointDeltaIdPrefix + checkpointName;\n};\n\nwindow.deltaIdIsACheckpoint = function (deltaId) {\n  console.assert(typeof deltaId === 'string');\n  console.assert(arguments.length === 1, 'Wrong number of arguments');\n  return deltaId.startsWith(checkpointDeltaIdPrefix);\n};\n\nwindow.getAllCheckpointDeltaIds = function () {\n  console.assert(arguments.length === 0, 'Wrong number of arguments');\n  return [...window.getAllDeltaIds().filter(window.deltaIdIsACheckpoint)];\n};\n\nwindow.getCheckpointNameFromDeltaId = function (deltaId) {\n  console.assert(arguments.length === 1, 'Wrong number of arguments');\n  console.assert(typeof deltaId === 'string');\n  console.assert(window.deltaIdIsACheckpoint(deltaId), deltaId + ' is NOT a checkpoint!');\n  return deltaId.substr(checkpointDeltaIdPrefix.length);\n};\n\nwindow.getAllCheckpointNames = function () {\n  return window.getAllCheckpointDeltaIds().map(window.getCheckpointNameFromDeltaId);\n};\n\nwindow.checkpointExistsByName = function (checkpointName) {\n  return window.getAllCheckpointNames().includes(checkpointName);\n};\n\nwindow.addCheckpoint = function (checkpointName, stateDeltaIdStack = window.getSimplifiedStateDeltaIdStack()) {\n  //Capture the current state as a special kind of delta called a 'checkpoint', as an inheritance of the current delta stack\n  console.assert(arguments.length === 2, 'Wrong number of arguments');\n  console.assert(typeof checkpointName === 'string');\n  const checkpointDeltaId = checkpointDeltaIdPrefix + checkpointName;\n  console.assert(!(checkpointDeltaId in window.config.deltas), 'Checkpoint deltaId is already taken! checkpointDeltaId=' + JSON.stringify(checkpointDeltaId));\n  let line1 = ['deltas', checkpointDeltaId, ['inherit', 'initial', ...stateDeltaIdStack].join(' ')].join('\\t');\n  let line2 = ['deltas', checkpointDeltaId, ['overlay', 'text', ...stateDeltaIdStack].join(' ')].join('\\t');\n  window.addLinesToConfigString([line1, line2].join('\\n')); //We probably have an extra 'initial' at the beginning of the inheritance...this is OK. The delta engine doesn't care.\n};\n\nwindow.goToCheckpointByName = function (checkpointName) {\n  console.assert(typeof checkpointName === 'string');\n  console.assert(window.checkpointExistsByName(checkpointName), 'Checkpoint \"' + checkpointName + '\" doesnt exist!');\n  let checkpointDeltaId = window.checkpointNameToDeltaId(checkpointName);\n  window.pushDeltaIDToStateStack(checkpointDeltaId);\n  window.setStateFromDeltaIDArray(['initial', checkpointDeltaId]);\n  window.requestRender();\n};\n\nwindow.selectCheckpoint = function () {}; //TODO implement this\n\n\nconst tools = {\n  async pour({\n    pour_height = 6.5\n  } = {}) {\n    alert(\"Please click and drag from the beaker you wish to pour from to the beaker you wish to pour into\");\n\n    const _ref10 = await window.getItemIdPairByDragging(),\n          _ref11 = _slicedToArray(_ref10, 2),\n          firstItemId = _ref11[0],\n          secondItemId = _ref11[1];\n\n    const config = window.config;\n\n    if (config.items[firstItemId] !== 'simpleBeaker') {\n      alert(\"Cancelling pour operation, because the first item you selected (\" + firstItemId + \") is not a beaker and therefore cannot be poured from\");\n      return;\n    }\n\n    if (config.items[secondItemId] !== 'simpleBeaker') {\n      alert(\"Cancelling pour operation, because the second item you selected (\" + secondItemId + \") is not a beaker and therefore cannot be poured into\");\n      return;\n    } // const firstItem =items[firstItemId]\n    // const secondItem=items[secondItemId]\n    // const firstItem =await selectionDialog(\"Which item would you like to pour stuff from?\",window.allItemIdsWithTransform())\n    // const secondItem=await selectionDialog(\"Which item would you like to pour stuff into?\",window.allItemIdsWithTransform())\n\n\n    const pourDeltas_prefix = 'pour.' + firstItemId + '.to.' + secondItemId + '.from.' + window.getMostRecentDeltaId() + '_'; //deltaDialog(\"What should the new animation sequence be called?\").trim()\n    // alert(\"Implement pouring from \"+firstItemId+\" to \"+secondItemId)\n\n    let originalFirstItemRotation = window.deltas.soaked(window.items[firstItemId], {\n      transform: {\n        rotation: {\n          /*x: null, y: null, */\n          z: null\n        }\n      }\n    });\n    let originalFirstItemPosition = window.deltas.soaked(window.items[firstItemId], {\n      transform: {\n        position: {\n          x: null,\n          y: null,\n          z: null\n        }\n      }\n    });\n    let firstItemRotation = window.deltas.soaked(window.items[firstItemId], {\n      transform: {\n        rotation: {\n          /*x: null, y: null,*/\n          z: null\n        }\n      }\n    }); //For the pouring delta\n\n    let secondItemPosition = window.deltas.soaked(window.items[secondItemId], {\n      transform: {\n        position: {\n          x: null,\n          y: null,\n          z: null\n        }\n      }\n    }); //For the pouring delta\n\n    secondItemPosition.transform.position.y += pour_height;\n    firstItemRotation.transform.rotation.z += 180;\n    const state = window.tween.delta;\n    const firstState = state[firstItemId];\n    const secondState = state[secondItemId];\n    const firstFillLevel = firstState.fluid.transform.scale.y;\n    const secondFillLevel = secondState.fluid.transform.scale.y;\n    console.warn(firstFillLevel, secondFillLevel);\n    const firstFillColor = firstState.fluid.material.modes[firstState.fluid.material.mode].color;\n    const secondFillColor = secondState.fluid.material.modes[secondState.fluid.material.mode].color;\n    const maxPourLevel = Math.min(1 - secondFillLevel, firstFillLevel); //Don't let them pour more fluid than we have, or pour more fluid than the second beaker can hold\n\n    const pourLevel = await window.numberDialog({\n      promptText: \"How much fluid would you like to pour?\",\n      min: 0,\n      max: maxPourLevel,\n      cancellable: false\n    });\n    const newSecondFillLevel = pourLevel + secondFillLevel;\n    const newFirstFillLevel = firstFillLevel - pourLevel;\n    console.warn(\"LEVELS: \", newSecondFillLevel, newFirstFillLevel);\n    const newColorAlpha = secondFillLevel === 0 ? 1 : pourLevel / newSecondFillLevel; //More alpha ---> more color change. The color of the new liquid is proportional to a mix of the previous colors. The boolean condition is to avoid any possible division by zero errors.\n\n    const newColor = JSON.parse(JSON.stringify(window.deltas.blended(secondFillColor, firstFillColor, newColorAlpha)));\n    let pourDeltas_pick_up = pourDeltas_prefix + '_0'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_move_to_target = pourDeltas_prefix + '_1'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_rotate = pourDeltas_prefix + '_2'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_pour = pourDeltas_prefix + '_3'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_rotate_back = pourDeltas_prefix + '_4'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_move_back = pourDeltas_prefix + '_5'.trim(); //Trim just in case I put a space on the end by accident...\n\n    let pourDeltas_put_down = pourDeltas_prefix + '_6'.trim(); //Trim just in case I put a space on the end by accident...\n\n    function autoTo(deltaId) {\n      return {\n        scene: {\n          transitions: {\n            auto: {\n              delta: deltaId,\n              time: 1\n            }\n          }\n        }\n      };\n    }\n\n    window.addLinesToConfigString(window.djson.stringify({\n      \"\": \"Pouring \" + firstItemId + \" to \" + secondItemId + \" via delta \" + pourDeltas_prefix,\n      //A comment\n      deltas: {\n        [window.getMostRecentDeltaId()]: {\n          // scene:{transitions:{drag:{[firstItem]:{[secondItem]:{delta:pourDeltas_pick_up,time:1}}}}}\n          scene: {\n            transitions: {\n              drag: {\n                [firstItemId]: {\n                  [secondItemId]: {\n                    delta: pourDeltas_move_to_target,\n                    time: 1\n                  }\n                }\n              }\n            }\n          }\n        },\n        // [pourDeltas_pick_up]: {\n        // \t[firstItem]: {transform:{position:{y:secondItemPosition.transform.position.y}}},\n        // \t...autoTo(pourDeltas_move_to_target)\n        // },\n        [pourDeltas_move_to_target]: _objectSpread({\n          [firstItemId]: secondItemPosition\n        }, autoTo(pourDeltas_rotate)),\n        [pourDeltas_rotate]: _objectSpread({\n          [firstItemId]: firstItemRotation\n        }, autoTo(pourDeltas_pour)),\n        [pourDeltas_pour]: _objectSpread({\n          [firstItemId]: {\n            fluid: {\n              transform: {\n                scale: {\n                  y: newFirstFillLevel\n                }\n              }\n            }\n          },\n          [secondItemId]: {\n            fluid: {\n              transform: {\n                scale: {\n                  y: newSecondFillLevel\n                }\n              },\n              material: {\n                modes: {\n                  [secondState.fluid.material.mode]: {\n                    color: newColor\n                  }\n                }\n              }\n            }\n          }\n        }, autoTo(pourDeltas_rotate_back)),\n        [pourDeltas_rotate_back]: _objectSpread({\n          [firstItemId]: originalFirstItemRotation\n        }, autoTo(pourDeltas_put_down)),\n        // [pourDeltas_move_back]: {\n        // \t[firstItem]: {transform:{position:{x:originalFirstItemPosition.transform.position.x,\n        // \t\t\t\t                       z:originalFirstItemPosition.transform.position.z}}},\n        // \t...autoTo(pourDeltas_put_down)\n        // },\n        [pourDeltas_put_down]: {\n          [firstItemId]: originalFirstItemPosition\n        }\n      }\n    }));\n  },\n\n  async who() {\n    alert(\"Please click an item, and then I'll tell you it's name\");\n    alert(\"The item you clicked is called '\" + (await window.getItemIdByClicking()) + \"'\");\n  },\n\n  async where() {\n    alert(\"Please click somewhere, and I'll tell you where you clicked\");\n    const position = await window.getPositionByMouseDown();\n\n    if (!position) {\n      alert(\"You didn't click on an item, so you didn't click on a specific position.\");\n    } else {\n      alert(\"You clicked at position:\\n\" + window.djson.stringify(position));\n    }\n  },\n\n  async when() {\n    alert(\"The most recent delta is called '\" + window.getMostRecentDeltaId() + \"'\");\n  },\n\n  async move() {\n    alert(\"Please click the item that you would like to move\");\n    const itemId = await window.getItemIdByClicking();\n    alert(\"Please click on where you would like to move this item to\\n(This item is called '\" + itemId + \"')\");\n    const position = await window.getPositionByMouseDown();\n    const deltaId = window.getMostRecentDeltaId();\n\n    if (!position) {\n      alert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\" + itemId + \"'\");\n      return;\n    } else {\n      alert(\"Moving the item called '\" + itemId + \"' to position:\\n\" + window.djson.stringify(position));\n      window.addLinesToConfigString(['deltas', deltaId, itemId, 'transform', 'position', 'x ' + position.x, 'y ' + position.y, 'z ' + position.z].join('\\t'));\n    }\n  },\n\n  async add() {\n    const itemType = await selectionDialog(\"What kind of item do you want to add?\", 'simpleBeaker mesh'.split(' '));\n    const itemId = itemType + \"_\" + window.randomCharacters(3);\n    console.assert(!(itemId in window.config.items), 'Hash collision! This is a highly improbable, but technically possible error');\n    window.items[itemId] = window.modules[itemType](itemId); //This code was borrowed from config.js. We should refactor this to make a unified method for adding items.\n\n    window.addLinesToConfigString('items\t' + itemId + ' ' + itemType + '\\ndeltas\tinitial\t' + itemId + '\tcastShadow true');\n    window.requestRender(); //Choose initial position\n\n    if (window.confirm(\"Would you like to choose where to put this object now?\")) {\n      alert(\"Please click on where you would like to move this item to\\n(This item is called '\" + itemId + \"')\");\n      const position = await window.getPositionByMouseDown();\n      const deltaId = 'initial';\n\n      if (!position) {\n        alert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\" + itemId + \"'\");\n      } else {\n        // alert(\"Moving the item called '\"+itemId+\"' to position:\\n\"+window.djson.stringify(position))\n        window.addLinesToConfigString(['deltas', deltaId, itemId, 'transform', 'position', 'x ' + position.x, 'y ' + position.y, 'z ' + position.z].join('\\t'));\n      }\n    }\n\n    window.refreshPage(); //Apply all missing things to the item like textures etc\n  },\n\n  async addBeaker() {\n    const itemType = \"simpleBeaker\"; //await selectionDialog(\"What kind of item do you want to add?\",'simpleBeaker mesh'.split(' '))\n\n    const itemId = itemType + \"_\" + window.randomCharacters(3);\n    console.assert(!(itemId in window.config.items), 'Hash collision! This is a highly improbable, but technically possible error');\n    window.items[itemId] = window.modules[itemType](itemId); //This code was borrowed from config.js. We should refactor this to make a unified method for adding items.\n\n    const colorName = await selectionDialog(\"What color?\", 'white blue red green cyan magenta yellow black'.split(' '));\n\n    if (!colorName) {\n      alert(\"Add beaker cancelled\");\n      return;\n    }\n\n    const colors = {\n      'white': {\n        r: 1,\n        g: 1,\n        b: 1\n      },\n      'black': {\n        r: 0,\n        g: 0,\n        b: 0\n      },\n      'red': {\n        r: 1,\n        g: 0,\n        b: 0\n      },\n      'green': {\n        r: 0,\n        g: 1,\n        b: 0\n      },\n      'blue': {\n        r: 0,\n        g: 0,\n        b: 1\n      },\n      'cyan': {\n        r: 0,\n        g: 1,\n        b: 1\n      },\n      'magenta': {\n        r: 1,\n        g: 0,\n        b: 1\n      },\n      'yellow': {\n        r: 1,\n        g: 1,\n        b: 0\n      }\n    };\n    let lines = 'items\t' + itemId + ' ' + itemType + '\\ndeltas\tinitial\t' + itemId + '\tcastShadow true';\n    lines += '\\n';\n    const color = colors[colorName];\n    lines += [itemId, 'fluid\tmaterial\tphong\tcolor', 'r ' + color.r, 'g ' + color.g, 'b ' + color.b].join('\\t');\n    window.addLinesToConfigString(lines);\n    window.requestRender(); //Choose initial position\n\n    if (window.confirm(\"Would you like to choose where to put this object now?\")) {\n      alert(\"Please click on where you would like to move this item to\\n(This item is called '\" + itemId + \"')\");\n      const position = await window.getPositionByMouseDown();\n      const deltaId = 'initial';\n\n      if (!position) {\n        alert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\" + itemId + \"'\");\n      } else {\n        // alert(\"Moving the item called '\"+itemId+\"' to position:\\n\"+window.djson.stringify(position))\n        window.addLinesToConfigString(['deltas', deltaId, itemId, 'transform', 'position', 'x ' + position.x, 'y ' + position.y, 'z ' + position.z].join('\\t'));\n      }\n    }\n\n    window.refreshPage(); //Apply all missing things to the item like textures etc\n  },\n\n  async goto() {\n    //Go to a checkpoint\n    const checkpointName = await selectionDialog('Which checkpoint would you like to go to?', window.getAllCheckpointNames());\n    window.goToCheckpointByName(checkpointName);\n    alert(\"We are now at checkpoint '\" + checkpointName + \"'\");\n  },\n\n  async mark() {\n    //Mark a checkpoint\n    const checkpointName = await textDialog({\n      promptText: 'What would you like to call this checkpoint?',\n      condition: window.isNamespaceable\n    });\n\n    if (checkpointName == null) {\n      alert('Cancelled marking checkpoint');\n      return;\n    }\n\n    window.addCheckpoint(checkpointName);\n    window.goToCheckpointByName(checkpointName);\n    alert(\"Added checkpoint '\" + checkpointName + \"'\\nYou are now in this checkpoint\");\n  },\n\n  async reset() {\n    if (window.confirm(\"Are you sure you want to reset the current game?\")) {\n      window.setStateFromDeltaIDArray(['initial']);\n      window.requestRender();\n    }\n  },\n\n  async trans() {\n    //Add a transition to a checkpoint, or create a new checkpoint and transition to that instead\n    const checkpointName = await textDialog({\n      promptText: 'Please enter the name of the checkpoint you would like to transition to.\\nExisting checkpoints: ' + window.getAllCheckpointNames().join(', ')\n    }); // noinspection EqualityComparisonWithCoercionJS\n\n    if (checkpointName == undefined) return;\n\n    if (!window.checkpointExistsByName(checkpointName)) {\n      if (window.confirm('Checkpoint \\'' + checkpointName + '\\' doesnt exist, would you like to create a new one?')) {\n        window.addCheckpoint(checkpointName);\n      } else {\n        alert(\"Cancelled creating transition\");\n        return;\n      }\n    }\n\n    const transitionTime = await window.numberDialog({\n      promptText: 'How many seconds should this transition take to animate?',\n      min: 0,\n      max: 10\n    });\n    alert('Please either click an object or drag one object onto another in the same way you would like this transition to run');\n\n    const _ref12 = await window.getItemIdPairByDragging(),\n          _ref13 = _slicedToArray(_ref12, 2),\n          fromItemId = _ref13[0],\n          toItemId = _ref13[1];\n\n    const checkpointDeltaId = window.checkpointNameToDeltaId(checkpointName);\n    const currentDeltaId = window.getMostRecentDeltaId();\n    window.addLinesToConfigString(['deltas', currentDeltaId, 'scene', 'transitions', 'drag', fromItemId, toItemId, 'delta ' + checkpointDeltaId, 'time ' + transitionTime].join('\\t'));\n\n    if (window.confirm('Would you like to go to this checkpoint now?\\n(To checkpoint \\'' + checkpointName + '\\')')) {\n      window.goToCheckpointByName(checkpointName);\n      alert('You are now in checkpoint \\'' + checkpointDeltaId + '\\'');\n    }\n  }\n\n};\n\nfunction toolsDialog() {\n  async function toolsDialogHelper() {\n    const selectedTool = tools[(await selectionDialog(\"Select a tool\", Object.keys(tools)))];\n\n    if (selectedTool) {\n      selectedTool();\n    } else {\n      alert(\"Cancelled using a tool\");\n    }\n  }\n\n  toolsDialogHelper();\n}\n\nfunction viewState() {\n  alert(\"Current state:\\n\" + window.getSimplifiedStateDeltaIdStack());\n}\n\nfunction handlePopState() {\n  // viewState()\n  let simplifiedStateDeltaStack = window.getSimplifiedStateDeltaIdStack();\n\n  if (window.confirm(\"Would you like to pop \" + simplifiedStateDeltaStack[simplifiedStateDeltaStack.length - 1] + \" from the state stack?\\nCurrent state: \" + simplifiedStateDeltaStack)) {\n    window.popDeltaIDFromStateStack();\n    window.setStateFromDeltaIDArray(window.getSimplifiedStateDeltaIdStack());\n    window.requestRender();\n  }\n}\n\nfunction handlePushState() {\n  async function helper() {\n    // viewState()\n    let simplifiedStateDeltaStack = window.getSimplifiedStateDeltaIdStack();\n    let deltaID = await selectionDialog(\"Select a delta to push to the state:\", Object.keys(window.config.deltas));\n\n    if (!deltaID) {\n      alert(\"Cancelled pushing delta to state\");\n      return;\n    }\n\n    window.pushDeltaIDToStateStack(deltaID);\n    window.setStateFromDeltaIDArray(window.getSimplifiedStateDeltaIdStack());\n    window.requestRender();\n  }\n\n  helper();\n}\n\nfunction Tools() {}\n\nconst __weAreInAnIframe__ = window.location !== window.parent.location;\n\nfunction App() {\n  function setGameWindow(x) {\n    window.gameWindow = x.contentWindow;\n  } //Lab\n\n\n  const _useState5 = useState(window.getDeltasGuiSchema()),\n        _useState6 = _slicedToArray(_useState5, 2),\n        schema = _useState6[0],\n        setSchema = _useState6[1];\n\n  window.refreshGuiSchema = () => setSchema(window.getDeltasGuiSchema());\n\n  let gameStyle = {\n    width: '100%',\n    height: '100%',\n    border: '0' // noinspection HtmlUnknownTarget\n\n  };\n  const buttonStyle = {\n    filter: \"invert(0)\",\n    margin: 1,\n    opacity: .8\n  };\n  return React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'horizontal',\n      width: '25%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 972\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      padding: 10,\n      border: 10,\n      backgroundColor: 'rgba(255,255,255,.3)',\n      flexGrow: 4,\n      display: 'flex',\n      flexDirection: 'column',\n      overflowY: 'scroll',\n      pointerEvents: 'auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 973\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    style: {\n      color: 'white',\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 974\n    },\n    __self: this\n  }, \"Lab\", React.createElement(\"sup\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 974\n    },\n    __self: this\n  }, \"3\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 974\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 974\n    },\n    __self: this\n  }, \"By Ryan Burgert\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 975\n    },\n    __self: this\n  }), React.createElement(Button, {\n    style: buttonStyle,\n    onClick: handleEditCode,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 986\n    },\n    __self: this\n  }, \" Edit Djson Code \"), React.createElement(Button, {\n    style: buttonStyle,\n    onClick: handleHideEditorGui,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 987\n    },\n    __self: this\n  }, \" Hide Editor Gui \"), React.createElement(Button, {\n    color: \"secondary\",\n    style: buttonStyle,\n    onClick: handleNewLab,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 988\n    },\n    __self: this\n  }, \" New Lab         \"), React.createElement(Button, {\n    color: \"secondary\",\n    style: buttonStyle,\n    onClick: () => window.saveConfigToServer(),\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 989\n    },\n    __self: this\n  }, \" Save Lab        \"), React.createElement(Button, {\n    color: \"secondary\",\n    style: buttonStyle,\n    onClick: viewMySaves,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 990\n    },\n    __self: this\n  }, \" View Saved Labs \"), React.createElement(Button, {\n    color: \"secondary\",\n    style: buttonStyle,\n    onClick: handleLoadConfig,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 991\n    },\n    __self: this\n  }, \" Load Lab        \"), React.createElement(Button, {\n    color: \"secondary\",\n    style: buttonStyle,\n    onClick: () => handleLoadConfig({\n      concat: true\n    }),\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 992\n    },\n    __self: this\n  }, \" Combine Labs    \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: window.undoEditorChange,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 993\n    },\n    __self: this\n  }, \" Undo            \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: addItemDialogs,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 994\n    },\n    __self: this\n  }, \" Add Item        \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: addDeltaDialog,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 995\n    },\n    __self: this\n  }, \" Add Delta       \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: toolsDialog,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 996\n    },\n    __self: this\n  }, \" Tools           \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: viewState,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 997\n    },\n    __self: this\n  }, \" View State      \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: handlePopState,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 998\n    },\n    __self: this\n  }, \" Pop State       \"), React.createElement(Button, {\n    color: \"primary\",\n    style: buttonStyle,\n    onClick: handlePushState,\n    helptext: \"(Documentation goes here)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 999\n    },\n    __self: this\n  }, \" Push State      \"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1001\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1002\n    },\n    __self: this\n  }, React.createElement(Schema, {\n    schema: schema,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1003\n    },\n    __self: this\n  }))));\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n  ReactDOM.render(React.createElement(App, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1010\n    },\n    __self: this\n  }), document.getElementById('root')); // Your code to run since DOM is loaded and ready\n});","map":{"version":3,"sources":["/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/src/index.js"],"names":["MaterialButton","Input","React","useState","ReactDOM","Select","Switch","TextField","Tooltip","ExpansionPanelSummary","ExpansionPanel","Typography","ExpansionPanelDetails","ExpandMoreIcon","window","allItemTypesContainingStructure","structure","out","console","assert","arguments","length","Object","entries","getItemSchemas","itemType","itemSchema","containsStructure","push","allItemIdsOfType","type","config","items","_id","_type","allItemIdsContainingStructure","types","itemIds","allItemIdsWithTransform","transform","Multiplexer","schema","selectedOption","setSelectedOption","options","keys","map","key","value","label","width","x","StringInput","isLeaf","index","addItemDialogs","itemDialog","prompt","alert","typeDialog","name","addLinesToConfigString","refreshPage","deltaDialog","description","deltas","addDeltaDialog","d","refreshGuiSchema","Schema","TextInput","setValue","event","target","NumberInput","step","SelectInput","values","BooleanInput","Boolean","checked","LeafModifier","onClick","set","undefined","input","padding","paddingTop","backgroundColor","borderRadius","alignContent","path","state","oldStuff","setInterval","tryRefreshInstance","refreshInstance","GetSimpleGui","labels","instance","setInstance","getGuiArchitectureInstance","timerEvents","stuff","gameWindow","apply","i","includes","join","delta","valueInConfig","configString","localStorage","getItem","setConfigDjsonInLocalStorage","color","flexGrow","display","flexDirection","handleNewLab","confirm","doTimerEvents","log","editorMode","handleLoadConfig","kwargs","concat","code","loadConfigFromServer","JSON","stringify","viewMySaves","saves","getMySaves","handleEditCode","__weAreInAnIframe__","goToUrl","handleHideEditorGui","selectionDialog","promptText","selection","asyncPrompt","args","textDialog","condition","text","cancellable","asyncMethod","onInvalid","numberDialog","min","max","isNumeric","isNaN","Number","isValid","n","displayHelp","help","Button","props","margin","fontWeight","children","helpLabel","helptext","extraProps","title","cursor","checkpointDeltaIdPrefix","getAllDeltaIds","checkpointNameToDeltaId","checkpointName","deltaIdIsACheckpoint","deltaId","startsWith","getAllCheckpointDeltaIds","filter","getCheckpointNameFromDeltaId","substr","getAllCheckpointNames","checkpointExistsByName","addCheckpoint","stateDeltaIdStack","getSimplifiedStateDeltaIdStack","checkpointDeltaId","line1","line2","goToCheckpointByName","pushDeltaIDToStateStack","setStateFromDeltaIDArray","requestRender","selectCheckpoint","tools","pour","pour_height","getItemIdPairByDragging","firstItemId","secondItemId","pourDeltas_prefix","getMostRecentDeltaId","originalFirstItemRotation","soaked","rotation","z","originalFirstItemPosition","position","y","firstItemRotation","secondItemPosition","tween","firstState","secondState","firstFillLevel","fluid","scale","secondFillLevel","warn","firstFillColor","material","modes","mode","secondFillColor","maxPourLevel","Math","pourLevel","newSecondFillLevel","newFirstFillLevel","newColorAlpha","newColor","parse","blended","pourDeltas_pick_up","trim","pourDeltas_move_to_target","pourDeltas_rotate","pourDeltas_pour","pourDeltas_rotate_back","pourDeltas_move_back","pourDeltas_put_down","autoTo","scene","transitions","auto","time","djson","drag","who","getItemIdByClicking","where","getPositionByMouseDown","when","move","itemId","add","split","randomCharacters","modules","addBeaker","colorName","colors","r","g","b","lines","goto","mark","isNamespaceable","reset","trans","transitionTime","fromItemId","toItemId","currentDeltaId","toolsDialog","toolsDialogHelper","selectedTool","viewState","handlePopState","simplifiedStateDeltaStack","popDeltaIDFromStateStack","handlePushState","helper","deltaID","Tools","location","parent","App","setGameWindow","contentWindow","getDeltasGuiSchema","setSchema","gameStyle","height","border","buttonStyle","opacity","overflowY","pointerEvents","textAlign","saveConfigToServer","undoEditorChange","document","addEventListener","render","getElementById"],"mappings":"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","sourcesContent":["import MaterialButton from '@material-ui/core/Button'\nimport Input from '@material-ui/core/Input'\nimport React, {useState} from 'react'\nimport ReactDOM from 'react-dom'\nimport Select from 'react-select'\nimport Switch from '@material-ui/core/Switch'\nimport TextField from '@material-ui/core/TextField'\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport Typography from '@material-ui/core/Typography'\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\nwindow.allItemTypesContainingStructure=function(structure)\n{\n\tconst out=[]\n\tconsole.assert(arguments.length===1,'Wrong number of arguments')\n\t// window.assert.isPureObject(structure)\n\tfor(const [itemType,itemSchema] of Object.entries(window.getItemSchemas()))\n\t{\n\t\tif(window.containsStructure(itemSchema,structure))\n\t\t{\n\t\t\tout.push(itemType)\n\t\t}\n\t}\n\treturn out\n}\nwindow.allItemIdsOfType=function(type)\n{\n\tconst out=[]\n\tconsole.assert(arguments.length===1,'Wrong number of arguments')\n\t// window.assert.isString(type)\n\tfor(const [_id,_type] of Object.entries(window.config.items))\n\t{\n\t\tif(type===_type)\n\t\t{\n\t\t\tout.push(_id)\n\t\t}\n\t}\n\treturn out\n}\nwindow.allItemIdsContainingStructure=function(structure)\n{\n\tlet out=[]\n\tconsole.assert(arguments.length===1,'Wrong number of arguments')\n\t// window.assert.isPureObject(structure)\n\tconst types=window.allItemTypesContainingStructure(structure)\n\tfor(const type of types)\n\t{\n\t\tconst itemIds=window.allItemIdsOfType(type)\n\t\tout=[...out,...itemIds]\n\t}\n\treturn out\n}\nwindow.allItemIdsWithTransform=function()\n{\n\t//Return all item ids with full position, rotation, and\n\treturn window.allItemIdsContainingStructure({transform:{}})\n}\n\n\nfunction Multiplexer({schema})\n{\n\tconst [selectedOption, setSelectedOption]=useState(null)\n\tif(!schema)\n\t\treturn <div/>\n\tconst options=Object.keys(schema).map(key=>({value: key, label: key}))\n\treturn <div>\n\t\t<Select style={{width: '100%'}} value={{label: selectedOption}}\n\t\t\t\tonChange={x=>setSelectedOption(x.value)}\n\t\t\t\toptions={options}\n\t\t/>\n\t\t<div style={{width: '100%'}}>\n\t\t\t<table style={{width: '100%'}}>\n\t\t\t\t<tbody>\n\t\t\t\t<tr style={{width: '100%'}}>\n\t\t\t\t\t<td style={{width: '10px'}}>\n\t\t\t\t\t\t{}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style={{width: '100%'}}>\n\t\t\t\t\t\t<Schema schema={schema[selectedOption]}/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n}\n\nfunction StringInput({schema})\n{\n\treturn <div>{schema}</div>\n}\n\nfunction isLeaf(schema)\n{\n\tif(typeof schema!=='object')\n\t\treturn 'type'\n\tfor(const [index,value] of Object.entries(schema))\n\t{\n\t\tif(typeof value==='string')\n\t\t{\n\t\t\tconsole.assert('type' in schema)\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\nfunction addItemDialogs()\n{\n\tfunction itemDialog()\n\t{\n\t\tconst value=prompt(\"Enter the new item name:\")\n\t\tif(!value)\n\t\t\treturn alert('Canceled adding item')\n\t\telse if(value in window.config.items)\n\t\t{\n\t\t\talert('Sorry, that names already taken! Try another one...')\n\t\t\treturn itemDialog()\n\t\t}\n\t\treturn value\n\t}\n\tfunction typeDialog()\n\t{\n\t\tconst value=prompt(\"Enter the new item type! Please choose from: \"+Object.keys(window.getItemSchemas()))\n\t\tif(!value)\n\t\t\treturn alert('Canceled adding item')\n\t\telse if(!(value in (window.getItemSchemas())))\n\t\t{\n\t\t\talert('Sorry, thats not a module type! Please choose from: '+Object.keys((window.getItemSchemas())))\n\t\t\treturn typeDialog()\n\t\t}\n\t\treturn value\n\t}\n\tconst name=itemDialog()\n\tif(!name)\n\t\treturn\n\tconst type=typeDialog()\n\tif(!type)\n\t\treturn\n\talert(\"Success! Added item. Please refresh the page to see changes.\")\n\twindow.addLinesToConfigString('items\t'+name+' '+type)\n\twindow.refreshPage()\n}\n\nfunction deltaDialog(description=\"\")\n{\n\tconst value=prompt(description+'\\n'+\"Enter the new delta name:\")\n\tif(!value)\n\t\treturn alert('Canceled adding delta')\n\telse if(value in window.config.deltas)\n\t{\n\t\talert('Sorry, that names already taken! Try another one...')\n\t\treturn deltaDialog()\n\t}\n\treturn value\n}\nfunction addDeltaDialog()\n{\n\tconst d=deltaDialog()\n\tif(!d)return\n\talert(\"Success! Added delta. You will now see it in the top dropdown menu.\")\n\twindow.addLinesToConfigString('deltas\t'+d)\n\twindow.refreshGuiSchema()\n}\n\nfunction Schema({schema})\n{\n\tif(!schema)\n\t\treturn <div></div>\n\tif(isLeaf(schema))\n\t{\n\t\treturn <LeafModifier schema={schema}/>\n\t}\n\telse\n\t{\n\t\treturn <Multiplexer schema={schema}/>\n\t}\n}\n\nfunction TextInput({value,setValue})\n{\n\treturn <Input\n\t\tvalue={value}\n\t\tonChange={event=>{setValue(event.target.value)}}\n\t\t// className={classes.input}\n\t\tinputProps={{\n\t\t\t'aria-label': 'Description',\n\t\t}}/>\n}\nfunction NumberInput({value,setValue,step=.1})\n{\n\treturn <TextField\n\t\ttype=\"number\"\n\t\tvalue={value}\n\n\t\tinputProps={{ /*min: \"0\", max: \"10\",*/ step: step}}\n\t\tonChange={event=>{setValue(event.target.value)}}\n\t\t// className={classes.input}\n\t/>\n}\n\nfunction SelectInput({value,setValue,values=[]})\n{\n\treturn <Select value={{label: value}}\n\t\t\t\t   onChange={x=>setValue(x.value)}\n\t\t\t\t   options={values.map(key=>({value: key, label: key}))}\n\t/>\n}\n\nfunction BooleanInput({value,setValue})\n{\n\treturn <Switch\n\t\tchecked={Boolean(value)}\n\t\tonChange={event=>setValue(event.target.checked)}\n\t\tcolor=\"primary\"\n\t/>\n}\n\nfunction LeafModifier({schema})\n{\n\tlet onClick=function()\n\t{\n\t\tconst value=prompt(\"Enter the new value:\")\n\t\tif(value==null)\n\t\t\treturn//Canceled\n\t\telse\n\t\t{\n\t\t\tschema.set(value)\n\t\t}\n\t}\n\n\tconst checked=schema.config!==undefined\n\t// alert(\"ASOIJD\")\n\tlet input=<TextInput value={schema.config} setValue={schema.set}/>\n\tif(schema.type==='string')\n\t{\n\t\tinput=input//Default: text input\n\t}\n\telse if(schema.type==='boolean')\n\t{\n\t\tinput=<BooleanInput value={schema.config} setValue={schema.set}/>\n\t}\n\telse if(schema.type==='number')\n\t{\n\t\tinput=<NumberInput value={schema.config} setValue={schema.set}/>\n\t}\n\telse if(schema.type==='select')\n\t{\n\t\tinput=<SelectInput value={schema.config} values={schema.values} setValue={schema.set}/>\n\t}\n\tconsole.assert(input!==undefined)\n\treturn <div style={{padding: 20, paddingTop: 10, backgroundColor: 'rgba(255,255,255,.5)', borderRadius: 30, alignContent: 'center'}}>\n\t\t<Switch\n\t\t\tchecked={checked}\n\t\t\tdisabled={schema.path[0]==='initial'}\n\t\t\tonChange={event=>\n\t\t\t{\n\t\t\t\tconst checked=event.target.checked\n\t\t\t\tif(checked)/*alert(schema.state+'  '+schema.config)*/\n\t\t\t\tschema.set(checked ? schema.state : null)\n\t\t\t}}//if(!checked){schema.set(undefined)}else{console.assert(checked);setUsed(checked)}}}\n\t\t\tcolor=\"primary\"\n\t\t/>{checked ? \"(In delta)\" : \"(Not in delta)\"}<br/>\n\t\t{checked ? input : <div/>}\n\n\t</div>\n\n\t\t//\t\t   <Button\n\t\t//\tvariant=\"contained\" onClick={onClick}\n\t\t//\tsize=\"small\"\n\t\t//\t\t   >{'State: '+schema.state+'\\tConfig: '+schema.config/*schema.path+''*/}</Button>\n}\n\nlet oldStuff=undefined\nsetInterval(window.tryRefreshInstance,100)\nfunction tryRefreshInstance()\n{\n\tif(window.refreshInstance)\n\t\twindow.refreshInstance()\n}\nwindow.refreshInstance=undefined\nfunction GetSimpleGui()\n{\n\tconst labels               =[]\n\tlet [instance, setInstance]=useState({})\n\twindow.refreshInstance=()=>setInstance(window.getGuiArchitectureInstance())\n\ttimerEvents[0]             =()=>\n\t{\n\t\tlet stuff=window.gameWindow.getGuiArchitectureInstance.apply(window.gameWindow, [window.gameWindow.config])\n\t\tif(stuff!==oldStuff)\n\t\t{\n\t\t\tsetInstance(stuff)\n\t\t\toldStuff=stuff\n\t\t}\n\t}//This function is inefficient. It must be cleaned up asap. (it lists all possible controls...which is just STUPID (but also very easy to make))\n\n\tfor(const [index, i] of Object.entries(instance))\n\t{\n\t\tif(i.path.includes('color'))\n\t\t{\n\t\t\tlet onClick=function()\n\t\t\t{\n\t\t\t\tconst value=prompt(\"Enter the new value for \"+(i.path.join(' '))+\n\t\t\t\t\t\t\t\t\t   '\\n\\n at delta '+(i.delta)+'\\n\\nCurrent Value: '+i.valueInConfig)\n\t\t\t\tif(value==null)\n\t\t\t\t\treturn//Canceled\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet configString=localStorage.getItem('config')\n\t\t\t\t\tconfigString+='\\n'+'deltas\t'+i.delta+'\t'+i.path.join('\t')+' '+value\n\t\t\t\t\twindow.gameWindow.setConfigDjsonInLocalStorage(configString)\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet color  =i.valueInConfig===undefined ? \"primary\" : \"secondary\"\n\t\t\tlabels.push(<Button key={index}\n\t\t\t\t\t\t\t\tvariant=\"contained\" onClick={onClick}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tcolor={color}>\n\t\t\t\t{'deltas '+i.delta+' '+i.path.join(' ')}\n\t\t\t</Button>)\n\t\t}\n\t}\n\treturn <table style={{flexGrow: 4, display: 'flex', flexDirection: 'column'}}>\n\t\t{labels}\n\t</table>\n}\n\nfunction handleNewLab()\n{\n\tif(window.confirm('Are you sure you want to create a new lab (all progress will be lost)?'))\n\t{\n\t\twindow.setConfigDjsonInLocalStorage('')\n\t\twindow.refreshPage()\n\t}\n\n}\n\nwindow.gameWindow=undefined//Will be set to the 'window' element of the 'game.html' iframe\nconst timerEvents=[()=>{}]//Calls each one of these on a timer\nfunction doTimerEvents()\n{\n\tif(window.gameWindow!==undefined)//We're not ready yet: the game iframe has to finish loading first\n\t{\n\t\tconsole.log(\"HO\")\n\t\twindow.gameWindow.editorMode=true\n\t\tfor(const event of timerEvents)\n\t\t\tevent()\n\t}\n}\nsetInterval(doTimerEvents, 100)\n\nfunction handleLoadConfig(kwargs={})\n{\n\tconst {concat=false}=kwargs\n\tconst code=prompt('Please enter the 4 character code (case-sensitive) that you received when pressing \"Save Config\"')\n\tif(typeof code==='string' && code.length===4)\n\t{\n\t\twindow.loadConfigFromServer(code,{concat})\n\t}\n\telse if(!code)\n\t{\n\t\talert('Loading config from server cancelled.')\n\t}\n\telse\n\t{\n\t\talert('Please enter a four character code (you entered '+JSON.stringify(code)+', which has '+code.length+' characters)')\n\t\thandleLoadConfig()\n\t}\n}\n\nfunction viewMySaves()\n{\n\tconst saves=window.getMySaves()\n\tif(!saves.length)\n\t\twindow.alert('You currently have no saved labs.')\n\telse\n\t\twindow.alert(\"All of your saved file codes (bottom is most recent):\"+'\\n'+saves.join('\\n'))\n}\n\n\nfunction handleEditCode()\n{\n\tif(!__weAreInAnIframe__)//We are in an iframe\n\t{\n\t\tif(window.confirm('Are you sure you want to go to the code editor? (This option exists for mainly devs, such as Ryan Jenny and Rong)'))\n\t\t{\n\t\t\twindow.goToUrl('../Editor/index.html')\n\t\t}\n\t}\n\telse\n\t{\n\t\talert('You\\'re already in the code editor.')\n\t}\n}\n\nfunction handleHideEditorGui()\n{\n\tif(window.confirm('Are you sure you want to hide to the editor gui? (This will bring you to game.html)'))\n\t{\n\t\twindow.goToUrl('../game.html')\n\t}\n}\n\n\n//PART OF TODO TO MAKE LABS LOADABLE VIA URL\n// if(window.location.pathname.length=5)//In other words, if we have some 5 letter code\n\nasync function selectionDialog(promptText=\"\",selection)\n{\n\n\t//Will be replaced by HTML or something later\n\tconsole.assert(selection.length)\n\tconsole.assert(arguments.length===2,'Wrong number of arguments')\n\tlet out=await asyncPrompt(promptText+'\\nPlease choose from these options (case sensitive):\\n'+selection)\n\tif(selection.includes(out))\n\t\treturn out\n\tif(!out)\n\t\treturn null\n\treturn selectionDialog(promptText,selection)\n}\n\nasync function asyncPrompt(...args)\n{\n\treturn window.prompt(...args)\n}\n\n// noinspection EqualityComparisonWithCoercionJS\nasync function textDialog({promptText='',condition=text=>text!=undefined,cancellable=true,asyncMethod=prompt,onInvalid=async text=>alert(`Sorry, the input '${text}' isn't allowed...please try again`)}={})\n{\n\twhile(true)\n\t{\n\t\tconst text=await asyncMethod(promptText)\n\t\t// noinspection EqualityComparisonWithCoercionJS\n\t\tif(cancellable&&text==undefined)\n\t\t{\n\t\t\treturn undefined//User hit cancel or something\n\t\t}\n\t\tif(condition(text))\n\t\t{\n\t\t\treturn text\n\t\t}\n\t\telse\n\t\t{\n\t\t\tawait onInvalid(text)\n\t\t}\n\t}\n}\n\nwindow.numberDialog=async function({promptText='',min=-1/0,max=1/0,...kwargs}={})\n{\n\tfunction isNumeric(text)\n\t{\n\t\treturn !isNaN(Number(text))\n\t}\n\tfunction isValid(text)\n\t{\n\t\tif(!isNumeric(text))\n\t\t\treturn false\n\t\tconst n=Number(text)\n\t\treturn n<=max && n>=min\n\t}\n\treturn Number(await textDialog({condition:isValid, promptText:promptText+'\\n'+'Please choose a number between '+min+' and '+max,...kwargs}))\n}\n\nfunction displayHelp(help)\n{\n\talert(help)\n}\n\nfunction Button(props)\n{\n\tlet out=<MaterialButton style={{margin: 1, fontWeight: 'bold'}}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t{...props}>\n\t\t\t{props.children}\n\t\t</MaterialButton>\n\tif(props.helpLabel||props.helptext)\n\t{\n\t\tlet extraProps={}\n\t\tif(props.helptext)\n\t\t{\n\t\t\textraProps.onClick=()=>displayHelp(props.helptext)\n\t\t}\n\t\tlet title=<div style={{cursor:\"help\"}}{...extraProps}>\n\t\t\t<h3>\n\t\t\t\t{props.helpLabel || \"Help\"}\n\t\t\t</h3>\n\t\t</div>\n\t\tout=<Tooltip title={title} placement=\"right\" interactive>\n\t\t\t{out}\n\t\t</Tooltip>\n\t}\n\treturn out\n}\n\nconst checkpointDeltaIdPrefix='checkpoint.'\nwindow.getAllDeltaIds=function()\n{\n\tconsole.assert(arguments.length===0,'Wrong number of arguments')\n\treturn Object.keys(window.config.deltas)\n}\nwindow.checkpointNameToDeltaId=function(checkpointName)\n{\n\treturn checkpointDeltaIdPrefix+checkpointName\n}\nwindow.deltaIdIsACheckpoint=function(deltaId)\n{\n\tconsole.assert(typeof deltaId==='string')\n\tconsole.assert(arguments.length===1,'Wrong number of arguments')\n\treturn deltaId.startsWith(checkpointDeltaIdPrefix)\n}\nwindow.getAllCheckpointDeltaIds    =function()\n{\n\tconsole.assert(arguments.length===0,'Wrong number of arguments')\n\treturn [...window.getAllDeltaIds().filter(window.deltaIdIsACheckpoint)]\n}\nwindow.getCheckpointNameFromDeltaId=function(deltaId)\n{\n\tconsole.assert(arguments.length===1,'Wrong number of arguments')\n\tconsole.assert(typeof deltaId==='string')\n\tconsole.assert(window.deltaIdIsACheckpoint(deltaId),deltaId+' is NOT a checkpoint!')\n\treturn deltaId.substr(checkpointDeltaIdPrefix.length)\n}\nwindow.getAllCheckpointNames       =function()\n{\n\treturn window.getAllCheckpointDeltaIds().map(window.getCheckpointNameFromDeltaId)\n}\nwindow.checkpointExistsByName      =function(checkpointName)\n{\n\treturn window.getAllCheckpointNames().includes(checkpointName)\n}\nwindow.addCheckpoint               =function(checkpointName,stateDeltaIdStack=window.getSimplifiedStateDeltaIdStack())\n{\n\t//Capture the current state as a special kind of delta called a 'checkpoint', as an inheritance of the current delta stack\n\tconsole.assert(arguments.length===2,'Wrong number of arguments')\n\tconsole.assert(typeof checkpointName==='string')\n\tconst checkpointDeltaId=checkpointDeltaIdPrefix+checkpointName\n\tconsole.assert(!(checkpointDeltaId in window.config.deltas),'Checkpoint deltaId is already taken! checkpointDeltaId='+JSON.stringify(checkpointDeltaId))\n\tlet line1=['deltas',checkpointDeltaId,['inherit','initial',...stateDeltaIdStack].join(' ')].join('\\t')\n\tlet line2=['deltas',checkpointDeltaId,['overlay','text',...stateDeltaIdStack].join(' ')].join('\\t')\n\twindow.addLinesToConfigString([line1,line2].join('\\n'))//We probably have an extra 'initial' at the beginning of the inheritance...this is OK. The delta engine doesn't care.\n}\nwindow.goToCheckpointByName        =function(checkpointName)\n{\n\tconsole.assert(typeof checkpointName==='string')\n\tconsole.assert(window.checkpointExistsByName(checkpointName), 'Checkpoint \"'+checkpointName+'\" doesnt exist!')\n\tlet checkpointDeltaId=window.checkpointNameToDeltaId(checkpointName)\n\twindow.pushDeltaIDToStateStack(checkpointDeltaId)\n\twindow.setStateFromDeltaIDArray(['initial',checkpointDeltaId])\n\twindow.requestRender()\n}\n\nwindow.selectCheckpoint=function(){}//TODO implement this\n\n\nconst tools={\n\tasync pour({pour_height=6.5}={})\n\t{\n\t\talert(\"Please click and drag from the beaker you wish to pour from to the beaker you wish to pour into\")\n\t\tconst [firstItemId,secondItemId]=await window.getItemIdPairByDragging()\n\t\tconst config=window.config\n\t\tif(config.items[firstItemId]!=='simpleBeaker')\n\t\t{\n\t\t\talert(\"Cancelling pour operation, because the first item you selected (\"+firstItemId+\") is not a beaker and therefore cannot be poured from\")\n\t\t\treturn\n\t\t}\n\t\tif(config.items[secondItemId]!=='simpleBeaker')\n\t\t{\n\t\t\talert(\"Cancelling pour operation, because the second item you selected (\"+secondItemId+\") is not a beaker and therefore cannot be poured into\")\n\t\t\treturn\n\t\t}\n\t\t// const firstItem =items[firstItemId]\n\t\t// const secondItem=items[secondItemId]\n\n\t\t// const firstItem =await selectionDialog(\"Which item would you like to pour stuff from?\",window.allItemIdsWithTransform())\n\t\t// const secondItem=await selectionDialog(\"Which item would you like to pour stuff into?\",window.allItemIdsWithTransform())\n\t\tconst pourDeltas_prefix='pour.'+firstItemId+'.to.'+secondItemId+'.from.'+window.getMostRecentDeltaId()+'_'//deltaDialog(\"What should the new animation sequence be called?\").trim()\n\t\t// alert(\"Implement pouring from \"+firstItemId+\" to \"+secondItemId)\n\t\tlet originalFirstItemRotation =window.deltas.soaked(window.items[firstItemId ], {transform: {rotation: {/*x: null, y: null, */z: null}}})\n\t\tlet originalFirstItemPosition =window.deltas.soaked(window.items[firstItemId ], {transform: {position: {x: null, y: null, z: null}}})\n\t\tlet firstItemRotation =window.deltas.soaked(window.items[firstItemId ], {transform: {rotation: {/*x: null, y: null,*/ z: null}}})//For the pouring delta\n\t\tlet secondItemPosition=window.deltas.soaked(window.items[secondItemId], {transform: {position: {x: null, y: null, z: null}}})//For the pouring delta\n\n\t\tsecondItemPosition.transform.position.y+=pour_height\n\t\tfirstItemRotation.transform.rotation.z+=180\n\n\t\tconst state          =window.tween.delta\n\n\t\tconst firstState     =state[firstItemId ]\n\t\tconst secondState    =state[secondItemId]\n\n\t\tconst firstFillLevel =firstState .fluid.transform.scale.y\n\t\tconst secondFillLevel=secondState.fluid.transform.scale.y\n\t\tconsole.warn(firstFillLevel,secondFillLevel)\n\n\t\tconst firstFillColor =firstState .fluid.material.modes[firstState .fluid.material.mode].color\n\t\tconst secondFillColor=secondState.fluid.material.modes[secondState.fluid.material.mode].color\n\n\t\tconst maxPourLevel   =Math.min(1-secondFillLevel, firstFillLevel)//Don't let them pour more fluid than we have, or pour more fluid than the second beaker can hold\n\t\tconst pourLevel      =await window.numberDialog({promptText:\"How much fluid would you like to pour?\",min:0,max: maxPourLevel,cancellable:false})\n\t\tconst newSecondFillLevel   =pourLevel+secondFillLevel\n\t\tconst newFirstFillLevel=firstFillLevel-pourLevel\n\n\t\tconsole.warn(\"LEVELS: \",newSecondFillLevel,newFirstFillLevel)\n\n\t\tconst newColorAlpha  =secondFillLevel===0?1:pourLevel/newSecondFillLevel//More alpha ---> more color change. The color of the new liquid is proportional to a mix of the previous colors. The boolean condition is to avoid any possible division by zero errors.\n\n\t\tconst newColor       =JSON.parse(JSON.stringify(window.deltas.blended(secondFillColor,firstFillColor,newColorAlpha)))\n\n\t\tlet pourDeltas_pick_up       =pourDeltas_prefix+'_0'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_move_to_target=pourDeltas_prefix+'_1'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_rotate        =pourDeltas_prefix+'_2'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_pour          =pourDeltas_prefix+'_3'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_rotate_back   =pourDeltas_prefix+'_4'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_move_back     =pourDeltas_prefix+'_5'.trim()//Trim just in case I put a space on the end by accident...\n\t\tlet pourDeltas_put_down      =pourDeltas_prefix+'_6'.trim()//Trim just in case I put a space on the end by accident...\n\t\tfunction autoTo(deltaId)\n\t\t{\n\t\t\treturn {scene:{transitions:{auto:{delta:deltaId,time:1}}}}\n\t\t}\n\n\t\twindow.addLinesToConfigString(window.djson.stringify({\n\t\t\t\"\":\"Pouring \"+firstItemId+\" to \"+secondItemId+\" via delta \"+pourDeltas_prefix,//A comment\n\t\t\tdeltas:{\n\t\t\t\t[window.getMostRecentDeltaId()]: {\n\t\t\t\t\t// scene:{transitions:{drag:{[firstItem]:{[secondItem]:{delta:pourDeltas_pick_up,time:1}}}}}\n\t\t\t\t\tscene:{transitions:{drag:{[firstItemId]:{[secondItemId]:{delta:pourDeltas_move_to_target,time:1}}}}}\n\t\t\t\t},\n\t\t\t\t// [pourDeltas_pick_up]: {\n\t\t\t\t// \t[firstItem]: {transform:{position:{y:secondItemPosition.transform.position.y}}},\n\t\t\t\t// \t...autoTo(pourDeltas_move_to_target)\n\t\t\t\t// },\n\t\t\t\t[pourDeltas_move_to_target]: {\n\t\t\t\t\t[firstItemId]: secondItemPosition,\n\t\t\t\t\t...autoTo(pourDeltas_rotate)\n\t\t\t\t},\n\t\t\t\t[pourDeltas_rotate]: {\n\t\t\t\t\t[firstItemId]: firstItemRotation,\n\t\t\t\t\t...autoTo(pourDeltas_pour)\n\t\t\t\t},\n\t\t\t\t[pourDeltas_pour]: {\n\t\t\t\t\t[firstItemId]: {\n\t\t\t\t\t\tfluid: {\n\t\t\t\t\t\t\ttransform:{\n\t\t\t\t\t\t\t\tscale:{\n\t\t\t\t\t\t\t\t\ty:newFirstFillLevel\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t[secondItemId]:{\n\t\t\t\t\t\tfluid:{\n\t\t\t\t\t\t\ttransform:{\n\t\t\t\t\t\t\t\tscale:{\n\t\t\t\t\t\t\t\t\ty:newSecondFillLevel\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmaterial:{\n\t\t\t\t\t\t\t\tmodes:{\n\t\t\t\t\t\t\t\t\t[secondState.fluid.material.mode]:{\n\t\t\t\t\t\t\t\t\t\tcolor:newColor\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t...autoTo(pourDeltas_rotate_back)\n\t\t\t\t},\n\t\t\t\t[pourDeltas_rotate_back]: {\n\t\t\t\t\t[firstItemId]: originalFirstItemRotation,\n\t\t\t\t\t...autoTo(pourDeltas_put_down)\n\t\t\t\t\t// ...autoTo(pourDeltas_move_back)\n\t\t\t\t},\n\t\t\t\t// [pourDeltas_move_back]: {\n\t\t\t\t// \t[firstItem]: {transform:{position:{x:originalFirstItemPosition.transform.position.x,\n\t\t\t\t// \t\t\t\t                       z:originalFirstItemPosition.transform.position.z}}},\n\t\t\t\t// \t...autoTo(pourDeltas_put_down)\n\t\t\t\t// },\n\t\t\t\t[pourDeltas_put_down]: {\n\t\t\t\t\t[firstItemId]: originalFirstItemPosition\n\t\t\t\t}\n\t\t\t}\n\t\t}))\n\t},\n\tasync who()\n\t{\n\t\talert(\"Please click an item, and then I'll tell you it's name\")\n\t\talert(\"The item you clicked is called '\"+await window.getItemIdByClicking()+\"'\");\n\t},\n\tasync where()\n\t{\n\t\talert(\"Please click somewhere, and I'll tell you where you clicked\")\n\t\tconst position=await window.getPositionByMouseDown()\n\t\tif(!position)\n\t\t{\n\t\t\talert(\"You didn't click on an item, so you didn't click on a specific position.\")\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(\"You clicked at position:\\n\"+window.djson.stringify(position))\n\t\t}\n\t},\n\tasync when()\n\t{\n\t\talert(\"The most recent delta is called '\"+window.getMostRecentDeltaId()+\"'\")\n\t},\n\tasync move()\n\t{\n\t\talert(\"Please click the item that you would like to move\")\n\t\tconst itemId=await window.getItemIdByClicking()\n\t\talert(\"Please click on where you would like to move this item to\\n(This item is called '\"+itemId+\"')\")\n\t\tconst position=await window.getPositionByMouseDown()\n\t\tconst deltaId=window.getMostRecentDeltaId()\n\t\tif(!position)\n\t\t{\n\t\t\talert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\"+itemId+\"'\")\n\t\t\treturn\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(\"Moving the item called '\"+itemId+\"' to position:\\n\"+window.djson.stringify(position))\n\t\t\twindow.addLinesToConfigString(['deltas', deltaId, itemId, 'transform', 'position', 'x '+position.x, 'y '+position.y, 'z '+position.z].join('\\t'))\n\t\t}\n\t},\n\tasync add()\n\t{\n\t\tconst itemType=await selectionDialog(\"What kind of item do you want to add?\",'simpleBeaker mesh'.split(' '))\n\t\tconst itemId=itemType+\"_\"+window.randomCharacters(3)\n\t\tconsole.assert(!(itemId in window.config.items),'Hash collision! This is a highly improbable, but technically possible error')\n\t\twindow.items[itemId]=window.modules[itemType](itemId)//This code was borrowed from config.js. We should refactor this to make a unified method for adding items.\n\t\twindow.addLinesToConfigString('items\t'+itemId+' '+itemType+'\\ndeltas\tinitial\t'+itemId+'\tcastShadow true')\n\t\twindow.requestRender()\n\n\t\t//Choose initial position\n\t\tif(window.confirm(\"Would you like to choose where to put this object now?\"))\n\t\t{\n\t\t\talert(\"Please click on where you would like to move this item to\\n(This item is called '\"+itemId+\"')\")\n\t\t\tconst position=await window.getPositionByMouseDown()\n\t\t\tconst deltaId='initial'\n\t\t\tif(!position)\n\t\t\t{\n\t\t\t\talert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\"+itemId+\"'\")\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// alert(\"Moving the item called '\"+itemId+\"' to position:\\n\"+window.djson.stringify(position))\n\t\t\t\twindow.addLinesToConfigString(['deltas',deltaId,itemId,'transform','position','x '+position.x,'y '+position.y,'z '+position.z].join('\\t'))\n\t\t\t}\n\t\t}\n\t\twindow.refreshPage()//Apply all missing things to the item like textures etc\n\t},\n\tasync addBeaker()\n\t{\n\t\tconst itemType=\"simpleBeaker\"//await selectionDialog(\"What kind of item do you want to add?\",'simpleBeaker mesh'.split(' '))\n\t\tconst itemId=itemType+\"_\"+window.randomCharacters(3)\n\t\tconsole.assert(!(itemId in window.config.items),'Hash collision! This is a highly improbable, but technically possible error')\n\t\twindow.items[itemId]=window.modules[itemType](itemId)//This code was borrowed from config.js. We should refactor this to make a unified method for adding items.\n\t\tconst colorName=await selectionDialog(\"What color?\",'white blue red green cyan magenta yellow black'.split(' '))\n\t\tif(!colorName)\n\t\t{\n\t\t\talert(\"Add beaker cancelled\")\n\t\t\treturn\n\t\t}\n\t\tconst colors={\n\t\t\t'white'  :{r:1,g:1,b:1},\n\t\t\t'black'  :{r:0,g:0,b:0},\n\t\t\t'red'    :{r:1,g:0,b:0},\n\t\t\t'green'  :{r:0,g:1,b:0},\n\t\t\t'blue'   :{r:0,g:0,b:1},\n\t\t\t'cyan'   :{r:0,g:1,b:1},\n\t\t\t'magenta':{r:1,g:0,b:1},\n\t\t\t'yellow' :{r:1,g:1,b:0},\n\t\t}\n\n\t\tlet lines='items\t'+itemId+' '+itemType+'\\ndeltas\tinitial\t'+itemId+'\tcastShadow true'\n\t\tlines+='\\n'\n\t\tconst color=colors[colorName]\n\t\tlines+=[itemId,'fluid\tmaterial\tphong\tcolor','r '+color.r,'g '+color.g,'b '+color.b].join('\\t')\n\t\twindow.addLinesToConfigString(lines)\n\t\twindow.requestRender()\n\n\t\t//Choose initial position\n\t\tif(window.confirm(\"Would you like to choose where to put this object now?\"))\n\t\t{\n\t\t\talert(\"Please click on where you would like to move this item to\\n(This item is called '\"+itemId+\"')\")\n\t\t\tconst position=await window.getPositionByMouseDown()\n\t\t\tconst deltaId='initial'\n\t\t\tif(!position)\n\t\t\t{\n\t\t\t\talert(\"You didn't click on an item, so you didn't click on a specific position. Cancelled moving item '\"+itemId+\"'\")\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// alert(\"Moving the item called '\"+itemId+\"' to position:\\n\"+window.djson.stringify(position))\n\t\t\t\twindow.addLinesToConfigString(['deltas',deltaId,itemId,'transform','position','x '+position.x,'y '+position.y,'z '+position.z].join('\\t'))\n\t\t\t}\n\t\t}\n\t\twindow.refreshPage()//Apply all missing things to the item like textures etc\n\t},\n\tasync goto()\n\t{\n\t\t//Go to a checkpoint\n\t\tconst checkpointName=await selectionDialog('Which checkpoint would you like to go to?',window.getAllCheckpointNames())\n\t\twindow.goToCheckpointByName(checkpointName)\n\t\talert(\"We are now at checkpoint '\"+checkpointName+\"'\")\n\t},\n\tasync mark()\n\t{\n\t\t//Mark a checkpoint\n\t\tconst checkpointName=await textDialog({promptText:'What would you like to call this checkpoint?',condition:window.isNamespaceable})\n\t\tif(checkpointName==null)\n\t\t{\n\t\t\talert('Cancelled marking checkpoint')\n\t\t\treturn\n\t\t}\n\t\twindow.addCheckpoint(checkpointName)\n\t\twindow.goToCheckpointByName(checkpointName)\n\t\talert(\"Added checkpoint '\"+checkpointName+\"'\\nYou are now in this checkpoint\")\n\t},\n\tasync reset()\n\t{\n\t\tif(window.confirm(\"Are you sure you want to reset the current game?\"))\n\t\t{\n\t\t\twindow.setStateFromDeltaIDArray(['initial'])\n\t\t\twindow.requestRender()\n\t\t}\n\t},\n\tasync trans()\n\t{\n\t\t//Add a transition to a checkpoint, or create a new checkpoint and transition to that instead\n\t\tconst checkpointName = await textDialog({promptText:'Please enter the name of the checkpoint you would like to transition to.\\nExisting checkpoints: '+window.getAllCheckpointNames().join(', ')})\n\t\t// noinspection EqualityComparisonWithCoercionJS\n\t\tif(checkpointName==undefined)\n\t\t\treturn\n\t\tif(!window.checkpointExistsByName(checkpointName))\n\t\t{\n\t\t\tif(window.confirm('Checkpoint \\''+checkpointName+'\\' doesnt exist, would you like to create a new one?'))\n\t\t\t{\n\t\t\t\twindow.addCheckpoint(checkpointName)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\talert(\"Cancelled creating transition\")\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tconst transitionTime=await window.numberDialog({promptText:'How many seconds should this transition take to animate?',min:0,max:10})\n\n\t\talert('Please either click an object or drag one object onto another in the same way you would like this transition to run')\n\t\tconst [fromItemId,toItemId]=await window.getItemIdPairByDragging()\n\n\t\tconst checkpointDeltaId=window.checkpointNameToDeltaId(checkpointName)\n\t\tconst currentDeltaId   =window.getMostRecentDeltaId()\n\n\t\twindow.addLinesToConfigString(['deltas',currentDeltaId,'scene','transitions','drag',fromItemId,toItemId,'delta '+checkpointDeltaId,'time '+transitionTime].join('\\t'))\n\n\t\tif(window.confirm('Would you like to go to this checkpoint now?\\n(To checkpoint \\''+checkpointName+'\\')'))\n\t\t{\n\t\t\twindow.goToCheckpointByName(checkpointName)\n\t\t\talert('You are now in checkpoint \\''+checkpointDeltaId+'\\'')\n\t\t}\n\t},\n\t// async fill()\n\t// {\n\t// \t//Meant for simpleBeaker items\n\t// \talert(\"Please click a simpleBeaker item\")\n\t// \tconst itemId=await window.getItemIdByClicking()\n\t// \tif(window.config.items[itemId]!=='simpleBeaker')\n\t// \t{\n\t// \t\talert('Sorry, but we had to cancel using the fill tool. The fill tool refers to the fill of liquid in a simpleBeaker item. However, you clicked an item called \\''+itemId+'\\', which is not a simpleBeaker. ')\n\t// \t\treturn\n\t// \t}\n\t// \tconst fillTool=await selectionDialog(\"What would you like to change about this item's fill?\", 'color', 'level')\n\t// \tif(!fillTool)\n\t// \t{\n\t// \t\talert('Cancelled using the fill tool')\n\t// \t\treturn\n\t// \t}\n\t// \tif(fillTool==='color')\n\t// \t{\n\t//\n\t// \t}\n\t// \telse if(fillTool==='level')\n\t// \t{\n\t//\n\t// \t}\n\t// \telse\n\t// \t{\n\t// \t\talert('Oops, something must have went wrong in the fill tool\\'s code...this should be impossible')\n\t// \t}\n\t// }\n}\n\nfunction toolsDialog()\n{\n\tasync function toolsDialogHelper()\n\t{\n\t\tconst selectedTool=tools[await selectionDialog(\"Select a tool\",Object.keys(tools))]\n\t\tif(selectedTool)\n\t\t{\n\t\t\tselectedTool()\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert(\"Cancelled using a tool\")\n\t\t}\n\t}\n\ttoolsDialogHelper()\n}\n\nfunction viewState()\n{\n\talert(\"Current state:\\n\"+window.getSimplifiedStateDeltaIdStack())\n}\n\nfunction handlePopState()\n{\n\t// viewState()\n\tlet simplifiedStateDeltaStack=window.getSimplifiedStateDeltaIdStack()\n\tif(window.confirm(\"Would you like to pop \"+ simplifiedStateDeltaStack[simplifiedStateDeltaStack.length-1]+\" from the state stack?\\nCurrent state: \"+simplifiedStateDeltaStack))\n\t{\n\t\twindow.popDeltaIDFromStateStack()\n\t\twindow.setStateFromDeltaIDArray(window.getSimplifiedStateDeltaIdStack())\n\t\twindow.requestRender()\n\t}\n}\n\nfunction handlePushState()\n{\n\tasync function helper()\n\t{\n\t\t// viewState()\n\t\tlet simplifiedStateDeltaStack=window.getSimplifiedStateDeltaIdStack()\n\t\tlet deltaID              =await selectionDialog(\"Select a delta to push to the state:\", Object.keys(window.config.deltas))\n\t\tif(!deltaID)\n\t\t{\n\t\t\talert(\"Cancelled pushing delta to state\")\n\t\t\treturn\n\t\t}\n\t\twindow.pushDeltaIDToStateStack(deltaID)\n\t\twindow.setStateFromDeltaIDArray(window.getSimplifiedStateDeltaIdStack())\n\t\twindow.requestRender()\n\t}\n\thelper()\n}\n\nfunction Tools()\n{\n\n}\n\n\nconst __weAreInAnIframe__=window.location !== window.parent.location\nfunction App()\n{\n\tfunction setGameWindow(x)\n\t{\n\t\twindow.gameWindow=x.contentWindow\n\t}\n\t//Lab\n\tconst [schema, setSchema]=useState(window.getDeltasGuiSchema())\n\twindow.refreshGuiSchema  =()=>setSchema(window.getDeltasGuiSchema())\n\tlet gameStyle            ={width: '100%', height: '100%', border: '0'}\n\t// noinspection HtmlUnknownTarget\n\n\tconst buttonStyle={filter:\"invert(0)\",margin:1,opacity:.8}\n\treturn <div style={{display: 'flex', flexDirection: 'horizontal', width: '25%', height: '100%'}}>\n\t\t<div style={{padding: 10, border: 10, backgroundColor: 'rgba(255,255,255,.3)', flexGrow: 4, display: 'flex', flexDirection: 'column', overflowY: 'scroll', pointerEvents: 'auto'}}>\n\t\t\t<h1 style={{color: 'white', textAlign: 'center'}}>Lab<sup>3</sup></h1><br/><h4>By Ryan Burgert</h4>\n\t\t\t<br/>\n\t\t\t{/*<ExpansionPanel style={{borderRadius:30, backgroundColor:'rgba(0,0,0,0)'}}>*/}\n\t\t\t\t{/*<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>*/}\n\t\t\t\t\t{/*<Typography>Buttons</Typography>*/}\n\t\t\t\t{/*</ExpansionPanelSummary>*/}\n\t\t\t\t{/*<ExpansionPanelDetails>*/}\n\t\t\t\t\t{/*<Typography>*/}\n\t\t\t\t\t\t{/*Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex,*/}\n\t\t\t\t\t\t{/*sit amet blandit leo lobortis eget.*/}\n\t\t\t\t\t{/*</Typography>*/}\n\t\t\t\t{/*</ExpansionPanelDetails>*/}\n\t\t\t<Button                   style={buttonStyle} onClick={handleEditCode                     } helptext=\"(Documentation goes here)\"> Edit Djson Code </Button>\n\t\t\t<Button                   style={buttonStyle} onClick={handleHideEditorGui                } helptext=\"(Documentation goes here)\"> Hide Editor Gui </Button>\n\t\t\t<Button color=\"secondary\" style={buttonStyle} onClick={handleNewLab                       } helptext=\"(Documentation goes here)\"> New Lab         </Button>\n\t\t\t<Button color=\"secondary\" style={buttonStyle} onClick={()=>window.saveConfigToServer()    } helptext=\"(Documentation goes here)\"> Save Lab        </Button>\n\t\t\t<Button color=\"secondary\" style={buttonStyle} onClick={viewMySaves                        } helptext=\"(Documentation goes here)\"> View Saved Labs </Button>\n\t\t\t<Button color=\"secondary\" style={buttonStyle} onClick={handleLoadConfig                   } helptext=\"(Documentation goes here)\"> Load Lab        </Button>\n\t\t\t<Button color=\"secondary\" style={buttonStyle} onClick={()=>handleLoadConfig({concat:true})} helptext=\"(Documentation goes here)\"> Combine Labs    </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={window.undoEditorChange            } helptext=\"(Documentation goes here)\"> Undo            </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={addItemDialogs                     } helptext=\"(Documentation goes here)\"> Add Item        </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={addDeltaDialog                     } helptext=\"(Documentation goes here)\"> Add Delta       </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={toolsDialog                        } helptext=\"(Documentation goes here)\"> Tools           </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={viewState                          } helptext=\"(Documentation goes here)\"> View State      </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={handlePopState                     } helptext=\"(Documentation goes here)\"> Pop State       </Button>\n\t\t\t<Button color=\"primary\"   style={buttonStyle} onClick={handlePushState                    } helptext=\"(Documentation goes here)\"> Push State      </Button>\n\t\t\t{/*</ExpansionPanel>*/}\n\t\t\t<br/>\n\t\t\t<div style={{width:'100%'}}>\n\t\t\t\t<Schema schema={schema}/>\n\t\t\t </div>\n\t\t</div>\n\t</div>\n}\ndocument.addEventListener(\"DOMContentLoaded\", function(event)\n{\n\tReactDOM.render(<App/>, document.getElementById('root'))\n\t// Your code to run since DOM is loaded and ready\n})\n"]},"metadata":{},"sourceType":"module"}